(window.webpackJsonpError_handling=window.webpackJsonpError_handling||[]).push([[0],{44:function(e,t,a){e.exports=a(85)},49:function(e,t,a){},51:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(40),r=a.n(o),c=(a(49),a(2)),s=a(3),i=a(5),u=a(4),d=a(6),m=a(7),h=a(21),p=(a(50),a(51),a(19)),g=a(8),b=a.n(g),E=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("span",{tabIndex:"0",className:this.props.className,onClick:function(t){e.props.onClick(t)}},this.props.value)}}]),t}(n.Component),f=1,C=2,v="http://localhost:4000",y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleFileChange=function(e){a.setState({selectedFile:e.target.files[0]})},a.handleSubmit=function(e){e.preventDefault();var t=new FormData;a.state.selectedFile&&t.append("profilePhoto",a.state.selectedFile,a.state.selectedFile.name),b.a.post("".concat(v,"/users/register/").concat(a.state.name,"/").concat(a.state.email,"/").concat(a.state.password),t,{headers:{"Content-type":"multipart/form-data"}}).then(function(e){e.data?e.data.errorMessage?console.log(e.data.errorMessage):(console.log("User registered and logged in"),localStorage.name=e.data.name,localStorage.accessLevel=e.data.accessLevel,localStorage.profilePhoto=e.data.profilePhoto,localStorage.token=e.data.token,a.setState({isRegistered:!0})):console.log("Registration failed")})},a.state={name:"",email:"",password:"",confirmPassword:"",selectedFile:null,isRegistered:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("form",{className:"form-container",noValidate:!0,id:"loginOrRegistrationForm"},this.state.isRegistered?l.a.createElement(h.a,{to:"/DisplayAllCars"}):null,l.a.createElement("h2",null,"New User Registration"),l.a.createElement("input",{name:"name",type:"text",placeholder:"Name",autoComplete:"name",value:this.state.name,onChange:this.handleChange,ref:function(t){e.inputToFocus=t}}),l.a.createElement("br",null),l.a.createElement("input",{name:"email",type:"email",placeholder:"Email",autoComplete:"email",value:this.state.email,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("input",{name:"password",type:"password",placeholder:"Password",autoComplete:"password",title:"Password must be at least ten-digits long and contains at least one lowercase letter, one uppercase letter, one digit and one of the following characters (\xa3!#\u20ac$%^&*)",value:this.state.password,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("input",{name:"confirmPassword",type:"password",placeholder:"Confirm password",autoComplete:"confirmPassword",value:this.state.confirmPassword,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("input",{name:"profilePhoto",type:"file",onChange:this.handleFileChange}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(E,{value:"Register New User",className:"green-button",onClick:this.handleSubmit}),l.a.createElement(m.b,{className:"red-button",to:"/DisplayAllCars"},"Cancel"))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.resetUsersModel=function(){b.a.post("".concat(v,"/users/reset_user_collection")).then(function(e){e.data?e.data.errorMessage?console.log(e.data.errorMessage):(console.log("User collection reset"),localStorage.clear()):console.log("Failed to reset User collection"),a.setState({isReset:!0})})},a.state={isReset:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("form",{className:"form-container",noValidate:!0,id:"loginOrRegistrationForm"},this.state.isReset?l.a.createElement(h.a,{to:"/DisplayAllCars"}):null,l.a.createElement("p",null,'"Reset User Database" is only for testing purposes.',l.a.createElement("br",null),"All code on the client-side and server-side relating to resetting the database should be removed from any development release"),l.a.createElement(E,{value:"Reset User Database",className:"red-button",onClick:this.resetUsersModel})," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("p",null,"Reset the database and set up an administrator with:",l.a.createElement("br",null)," * email ",l.a.createElement("strong",null,"admin@admin.com"),l.a.createElement("br",null)," * password ",l.a.createElement("strong",null,'123!"\xa3qweQWE')),l.a.createElement(m.b,{className:"red-button",to:"/DisplayAllCars"},"Cancel"))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){b.a.post("".concat(v,"/users/login/").concat(a.state.email,"/").concat(a.state.password)).then(function(e){localStorage.name=e.data.name,localStorage.accessLevel=e.data.accessLevel,localStorage.profilePhoto=e.data.profilePhoto,localStorage.token=e.data.token,a.setState({isLoggedIn:!0})}).catch(function(e){console.log(e.response.data)})},a.state={email:"",password:"",isLoggedIn:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("form",{className:"form-container",noValidate:!0,id:"loginOrRegistrationForm"},l.a.createElement("h2",null,"Login"),this.state.isLoggedIn?l.a.createElement(h.a,{to:"/DisplayAllCars"}):null,l.a.createElement("input",{type:"email",name:"email",placeholder:"Email",autoComplete:"email",value:this.state.email,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",autoComplete:"password",value:this.state.password,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(E,{value:"Login",className:"green-button",onClick:this.handleSubmit}),l.a.createElement(m.b,{className:"red-button",to:"/DisplayAllCars"},"Cancel"))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),b.a.post("".concat(v,"/users/logout")).then(function(e){e.data?e.data.errorMessage?console.log(e.data.errorMessage):(console.log("User logged out"),localStorage.clear(),a.setState({isLoggedIn:!1})):console.log("Logout failed")})},a.state={isLoggedIn:!0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,this.state.isLoggedIn?null:l.a.createElement(h.a,{to:"/DisplayAllCars"}),l.a.createElement(E,{value:"Log out",className:"red-button",onClick:this.handleSubmit}))}}]),t}(n.Component),w=a(1),D=a.n(w),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleFileChange=function(e){a.setState({selectedFiles:e.target.files})},a.handleSubmit=function(e){e.preventDefault();var t=new FormData;if(t.append("model",a.state.model),t.append("colour",a.state.colour),t.append("year",a.state.year),t.append("price",a.state.price),a.state.selectedFiles)for(var n=0;n<a.state.selectedFiles.length;n++)t.append("carPhotos",a.state.selectedFiles[n]);b.a.post("".concat(v,"/cars/add_car"),t,{headers:{authorization:localStorage.token,"Content-type":"multipart/form-data"}}).then(function(e){e.data?e.data.errorMessage?console.log(e.data.errorMessage):(console.log("Record added"),a.setState({redirectToDisplayAllCars:!0})):console.log("Record not added")})},a.state={model:"",colour:"",year:"",price:"",selectedFiles:null,redirectToDisplayAllCars:localStorage.accessLevel<C},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.inputToFocus.focus()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"form-container"},this.state.redirectToDisplayAllCars?l.a.createElement(h.a,{to:"/DisplayAllCars"}):null,l.a.createElement(D.a,null,l.a.createElement(D.a.Group,{controlId:"model"},l.a.createElement(D.a.Label,null,"Model"),l.a.createElement(D.a.Control,{ref:function(t){e.inputToFocus=t},type:"text",name:"model",value:this.state.model,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"colour"},l.a.createElement(D.a.Label,null,"Colour"),l.a.createElement(D.a.Control,{type:"text",name:"colour",value:this.state.colour,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"year"},l.a.createElement(D.a.Label,null,"Year"),l.a.createElement(D.a.Control,{type:"text",name:"year",value:this.state.year,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"price"},l.a.createElement(D.a.Label,null,"Price"),l.a.createElement(D.a.Control,{type:"text",name:"price",value:this.state.price,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"photos"},l.a.createElement(D.a.Label,null,"Photos"),l.a.createElement(D.a.Control,{type:"file",multiple:!0,onChange:this.handleFileChange}))," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(E,{value:"Add",className:"green-button",onClick:this.handleSubmit}),l.a.createElement(m.b,{className:"red-button",to:"/DisplayAllCars"},"Cancel")))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={model:a.state.model,colour:a.state.colour,year:a.state.year,price:a.state.price};b.a.put("".concat(v,"/cars/update_car/").concat(a.props.match.params.id),t,{headers:{authorization:localStorage.token}}).then(function(e){e.data?e.data.errorMessage?console.log(e.data.errorMessage):(console.log("Record updated"),a.setState({redirectToDisplayAllCars:!0})):console.log("Record not updated")})},a.state={model:"",colour:"",year:"",price:"",redirectToDisplayAllCars:localStorage.accessLevel<f},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.inputToFocus.focus(),b.a.get("".concat(v,"/cars/get_car/").concat(this.props.match.params.id),{headers:{authorization:localStorage.token}}).then(function(t){t.data?t.data.errorMessage?console.log(t.data.errorMessage):e.setState({model:t.data.model,colour:t.data.colour,year:t.data.year,price:t.data.price}):console.log("Record not found")})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"form-container"},this.state.redirectToDisplayAllCars?l.a.createElement(h.a,{to:"/DisplayAllCars"}):null,l.a.createElement(D.a,null,l.a.createElement(D.a.Group,{controlId:"model"},l.a.createElement(D.a.Label,null,"Model"),l.a.createElement(D.a.Control,{ref:function(t){e.inputToFocus=t},type:"text",name:"model",value:this.state.model,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"colour"},l.a.createElement(D.a.Label,null,"Colour"),l.a.createElement(D.a.Control,{type:"text",name:"colour",value:this.state.colour,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"year"},l.a.createElement(D.a.Label,null,"Year"),l.a.createElement(D.a.Control,{type:"text",name:"year",value:this.state.year,onChange:this.handleChange})),l.a.createElement(D.a.Group,{controlId:"price"},l.a.createElement(D.a.Label,null,"Price"),l.a.createElement(D.a.Control,{type:"text",name:"price",value:this.state.price,onChange:this.handleChange})),l.a.createElement(E,{value:"Update",className:"green-button",onClick:this.handleSubmit}),l.a.createElement(m.b,{className:"red-button",to:"/DisplayAllCars"},"Cancel")))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={redirectToDisplayAllCars:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.delete("".concat(v,"/cars/delete_car/").concat(this.props.match.params.id),{headers:{authorization:localStorage.token}}).then(function(t){t.data?(t.data.errorMessage?console.log(t.data.errorMessage):console.log("Record deleted"),e.setState({redirectToDisplayAllCars:!0})):console.log("Record not deleted")})}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.redirectToDisplayAllCars?l.a.createElement(h.a,{to:"/DisplayAllCars"}):null)}}]),t}(n.Component),R=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.car.photos.map(function(e){return b.a.get("".concat(v,"/cars/car_photo/").concat(e.filename)).then(function(t){t.data?t.data.errorMessage?console.log(t.data.errorMessage):document.getElementById(e._id).src="data:;base64,".concat(t.data.image):console.log("Record not found")})})}},{key:"render",value:function(){return l.a.createElement("tr",null,l.a.createElement("td",null,this.props.car.model),l.a.createElement("td",null,this.props.car.colour),l.a.createElement("td",null,this.props.car.year),l.a.createElement("td",null,this.props.car.price),l.a.createElement("td",{className:"carPhotos"},this.props.car.photos.map(function(e){return l.a.createElement("img",{key:e._id,id:e._id,alt:""})})),l.a.createElement("td",null,localStorage.accessLevel>0?l.a.createElement(m.b,{className:"green-button",to:"/EditCar/"+this.props.car._id},"Edit"):null,localStorage.accessLevel>=C?l.a.createElement(m.b,{className:"red-button",to:"/DeleteCar/"+this.props.car._id},"Delete"):null))}}]),t}(n.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Model"),l.a.createElement("th",null,"Colour"),l.a.createElement("th",null,"Year"),l.a.createElement("th",null,"Price"),l.a.createElement("th",null,"Photos"),l.a.createElement("th",null," "))),l.a.createElement("tbody",null,this.props.cars.map(function(e){return l.a.createElement(R,{key:e._id,car:e})})))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={cars:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(v,"/cars/")).then(function(t){t.data?t.data.errorMessage?console.log(t.data.errorMessage):(console.log("Records read"),e.setState({cars:t.data})):console.log("Record not found")})}},{key:"render",value:function(){return l.a.createElement("div",{className:"form-container"},localStorage.accessLevel>0?l.a.createElement("div",{className:"logout"},"null"!==localStorage.profilePhoto?l.a.createElement("img",{id:"profilePhoto",src:"data:;base64,".concat(localStorage.profilePhoto),alt:""}):null,l.a.createElement(S,null)):l.a.createElement("div",null,l.a.createElement(m.b,{className:"green-button",to:"/Login"},"Login"),l.a.createElement(m.b,{className:"blue-button",to:"/Register"},"Register"),l.a.createElement(m.b,{className:"red-button",to:"/ResetDatabase"},"Reset Database"),"  ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("div",{className:"table-container"},l.a.createElement(A,{cars:this.state.cars}),localStorage.accessLevel>=C?l.a.createElement("div",{className:"add-new-car"},l.a.createElement(m.b,{className:"blue-button",to:"/AddCar"},"Add New Car")):null))}}]),t}(n.Component),F=a(43),P=function(e){var t=e.component,a=e.exact,n=e.path,o=Object(F.a)(e,["component","exact","path"]);return l.a.createElement(h.b,{exact:a,path:n,render:function(e){return localStorage.accessLevel>0?l.a.createElement(t,Object.assign({},e,o)):l.a.createElement(h.a,{to:"/DisplayAllCars"})}})};"undefined"===typeof localStorage.accessLevel&&(localStorage.name="GUEST",localStorage.accessLevel=0,localStorage.token=null,localStorage.profilePhoto=null);var x=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement(h.d,null,l.a.createElement(h.b,{exact:!0,path:"/Register",component:y}),l.a.createElement(h.b,{exact:!0,path:"/ResetDatabase",component:O}),l.a.createElement(h.b,{exact:!0,path:"/",component:M}),l.a.createElement(h.b,{exact:!0,path:"/Login",component:j}),l.a.createElement(P,{exact:!0,path:"/Logout",component:S}),l.a.createElement(P,{exact:!0,path:"/AddCar",component:k}),l.a.createElement(P,{exact:!0,path:"/EditCar/:id",component:L}),l.a.createElement(P,{exact:!0,path:"/DeleteCar/:id",component:N}),l.a.createElement(h.b,{exact:!0,path:"/DisplayAllCars",component:M}),l.a.createElement(h.b,{path:"*",component:M})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.f8ac313d.chunk.js.map