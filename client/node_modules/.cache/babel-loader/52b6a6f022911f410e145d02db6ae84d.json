{"ast":null,"code":"import _defineProperty from \"C:\\\\nodejs_projects\\\\stylekoi_repo\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\nodejs_projects\\\\stylekoi_repo\\\\client\\\\src\\\\components\\\\BasketPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST } from \"../config/global_constants\";\nimport BuyCar from \"./BuyCar\";\n\nclass BasketPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      basketItems: JSON.parse(localStorage.getItem(\"basketItems\")) || []\n    }; // Bind methods to the class instance\n\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleIncreaseQuantity = this.handleIncreaseQuantity.bind(this);\n    this.handleDecreaseQuantity = this.handleDecreaseQuantity.bind(this);\n  }\n\n  handleDelete(index) {\n    const basketItems = this.state.basketItems;\n    const itemId = basketItems[index].id;\n    const updatedBasketItems = basketItems.filter(item => item.id !== itemId);\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\n    this.setState({\n      basketItems: updatedBasketItems\n    });\n  }\n\n  handleIncreaseQuantity(id) {\n    const basketItems = this.state.basketItems;\n    const updatedBasketItems = basketItems.map(item => {\n      if (item.id === id) {\n        return _objectSpread({}, item, {\n          quantity: (item.quantity || 0) + 1\n        }); // Initialize quantity to 0 if undefined\n      }\n\n      return item;\n    });\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\n    this.setState({\n      basketItems: updatedBasketItems\n    });\n  }\n\n  handleDecreaseQuantity(id) {\n    const basketItems = this.state.basketItems;\n    const updatedBasketItems = basketItems.map(item => {\n      if (item.id === id) {\n        const newQuantity = item.quantity - 1;\n        const quantity = newQuantity >= 0 ? newQuantity : 0;\n        return _objectSpread({}, item, {\n          quantity\n        });\n      }\n\n      return item;\n    });\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\n    this.setState({\n      basketItems: updatedBasketItems\n    });\n  }\n\n  render() {\n    let soldOrForSale = null;\n\n    if (localStorage.accessLevel <= ACCESS_LEVEL_GUEST) {\n      if (this.props.car.sold !== true) {\n        soldOrForSale = React.createElement(BuyCar, {\n          carID: this.props.car._id,\n          price: this.props.car.price,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        });\n      } else {\n        soldOrForSale = \"SOLD\";\n      }\n    }\n\n    const basketItems = this.state.basketItems; // Group items based on their IDs and count their quantities\n\n    const groupedItems = {};\n    basketItems.forEach(item => {\n      if (!groupedItems[item.id]) {\n        groupedItems[item.id] = _objectSpread({}, item, {\n          quantity: 0\n        });\n      }\n\n      groupedItems[item.id].quantity += 1; // Increment quantity\n    }); // Calculate total price of all items\n\n    const totalPrice = Object.values(groupedItems).reduce((total, item) => {\n      return total + item.price * item.quantity;\n    }, 0);\n    return React.createElement(\"div\", {\n      className: \"basket-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Basket\"), React.createElement(\"table\", {\n      className: \"basket-table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Total Price\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Action\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, Object.values(groupedItems).map((item, index) => React.createElement(\"tr\", {\n      key: index,\n      className: \"basket-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, item.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"\\u20AC\", item.price), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, item.quantity), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"\\u20AC\", (item.price * item.quantity).toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.handleDelete.bind(this, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Delete\"), React.createElement(\"button\", {\n      onClick: () => this.handleIncreaseQuantity(item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"+\"), React.createElement(\"button\", {\n      onClick: () => this.handleDecreaseQuantity(item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"-\")))))), React.createElement(\"div\", {\n      className: \"total-price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Total Price: \\u20AC\", totalPrice.toFixed(2)));\n  }\n\n}\n\nexport default BasketPage;","map":{"version":3,"sources":["C:\\nodejs_projects\\stylekoi_repo\\client\\src\\components\\BasketPage.js"],"names":["React","Component","ACCESS_LEVEL_GUEST","ACCESS_LEVEL_ADMIN","SERVER_HOST","BuyCar","BasketPage","constructor","props","state","basketItems","JSON","parse","localStorage","getItem","handleDelete","bind","handleIncreaseQuantity","handleDecreaseQuantity","index","itemId","id","updatedBasketItems","filter","item","setItem","stringify","setState","map","quantity","newQuantity","render","soldOrForSale","accessLevel","car","sold","_id","price","groupedItems","forEach","totalPrice","Object","values","reduce","total","name","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport {\r\n  ACCESS_LEVEL_GUEST,\r\n  ACCESS_LEVEL_ADMIN,\r\n  SERVER_HOST,\r\n} from \"../config/global_constants\";\r\n\r\nimport BuyCar from \"./BuyCar\";\r\n\r\n\r\nclass BasketPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      basketItems: JSON.parse(localStorage.getItem(\"basketItems\")) || [],\r\n    };\r\n\r\n    // Bind methods to the class instance\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n    this.handleIncreaseQuantity = this.handleIncreaseQuantity.bind(this);\r\n    this.handleDecreaseQuantity = this.handleDecreaseQuantity.bind(this);\r\n  }\r\n\r\n  handleDelete(index) {\r\n    const { basketItems } = this.state;\r\n    const itemId = basketItems[index].id;\r\n    const updatedBasketItems = basketItems.filter(item => item.id !== itemId);\r\n\r\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\r\n    this.setState({ basketItems: updatedBasketItems });\r\n  }\r\n\r\n  handleIncreaseQuantity(id) {\r\n    const { basketItems } = this.state;\r\n    const updatedBasketItems = basketItems.map(item => {\r\n      if (item.id === id) {\r\n        return { ...item, quantity: (item.quantity || 0) + 1 }; // Initialize quantity to 0 if undefined\r\n      }\r\n      return item;\r\n    });\r\n\r\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\r\n    this.setState({ basketItems: updatedBasketItems });\r\n  }\r\n\r\n  handleDecreaseQuantity(id) {\r\n    const { basketItems } = this.state;\r\n\r\n    const updatedBasketItems = basketItems.map(item => {\r\n      if (item.id === id) {\r\n        const newQuantity = item.quantity - 1;\r\n        const quantity = newQuantity >= 0 ? newQuantity : 0;\r\n        return { ...item, quantity };\r\n      }\r\n      return item;\r\n    });\r\n\r\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\r\n    this.setState({ basketItems: updatedBasketItems });\r\n  }\r\n\r\n  render() {\r\n\r\n    let soldOrForSale = null;\r\n    if (localStorage.accessLevel <= ACCESS_LEVEL_GUEST) {\r\n      if (this.props.car.sold !== true) {\r\n        soldOrForSale = (\r\n          <BuyCar carID={this.props.car._id} price={this.props.car.price} />\r\n        );\r\n      } else {\r\n        soldOrForSale = \"SOLD\";\r\n      }\r\n    }\r\n\r\n    const { basketItems } = this.state;\r\n\r\n    // Group items based on their IDs and count their quantities\r\n    const groupedItems = {};\r\n    basketItems.forEach(item => {\r\n      if (!groupedItems[item.id]) {\r\n        groupedItems[item.id] = { ...item, quantity: 0 };\r\n      }\r\n      groupedItems[item.id].quantity += 1; // Increment quantity\r\n    });\r\n\r\n    // Calculate total price of all items\r\n    const totalPrice = Object.values(groupedItems).reduce((total, item) => {\r\n      return total + (item.price * item.quantity);\r\n    }, 0);\r\n\r\n    return (\r\n      <div className=\"basket-page\">\r\n        <h1>Basket</h1>\r\n        <table className=\"basket-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Price</th>\r\n              <th>Quantity</th>\r\n              <th>Total Price</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {Object.values(groupedItems).map((item, index) => (\r\n              <tr key={index} className=\"basket-item\">\r\n                <td>{item.name}</td>\r\n                <td>€{item.price}</td>\r\n                <td>{item.quantity}</td>\r\n                <td>€{(item.price * item.quantity).toFixed(2)}</td>\r\n                <td>\r\n                  <button onClick={this.handleDelete.bind(this, index)}>Delete</button>\r\n                  <button onClick={() => this.handleIncreaseQuantity(item.id)}>+</button>\r\n                  <button onClick={() => this.handleDecreaseQuantity(item.id)}>-</button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"total-price\">\r\n          Total Price: €{totalPrice.toFixed(2)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BasketPage;"]},"metadata":{},"sourceType":"module"}