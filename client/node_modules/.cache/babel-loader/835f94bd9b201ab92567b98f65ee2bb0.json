{"ast":null,"code":"import _defineProperty from \"C:\\\\nodejs_projects\\\\stylekoi_repo\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\nodejs_projects\\\\stylekoi_repo\\\\client\\\\src\\\\components\\\\BuyBasket.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport BuyCar from \"./BuyCar\";\n\nclass BasketPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      basketItems: JSON.parse(localStorage.getItem(\"basketItems\")) || [],\n      totalPrice: 0\n    };\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleIncreaseQuantity = this.handleIncreaseQuantity.bind(this);\n    this.handleDecreaseQuantity = this.handleDecreaseQuantity.bind(this);\n    this.calculateTotalPrice = this.calculateTotalPrice.bind(this);\n  }\n\n  componentDidMount() {\n    this.calculateTotalPrice();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.basketItems !== this.state.basketItems) {\n      this.calculateTotalPrice();\n    }\n  }\n\n  calculateTotalPrice() {\n    const basketItems = this.state.basketItems;\n    const totalPrice = basketItems.reduce((total, item) => {\n      return total + item.price * (item.quantity || 1);\n    }, 0);\n    this.setState({\n      totalPrice\n    });\n  }\n\n  handleDelete(index) {\n    const basketItems = this.state.basketItems;\n    const itemId = basketItems[index].id;\n    const updatedBasketItems = basketItems.filter(item => item.id !== itemId);\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\n    this.setState({\n      basketItems: updatedBasketItems\n    });\n  }\n\n  handleIncreaseQuantity(id) {\n    const basketItems = this.state.basketItems;\n    const updatedBasketItems = basketItems.map(item => {\n      if (item.id === id) {\n        return _objectSpread({}, item, {\n          quantity: (item.quantity || 1) + 1\n        });\n      }\n\n      return item;\n    });\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\n    this.setState({\n      basketItems: updatedBasketItems\n    });\n  }\n\n  handleDecreaseQuantity(id) {\n    const basketItems = this.state.basketItems;\n    const updatedBasketItems = basketItems.map(item => {\n      if (item.id === id) {\n        const newQuantity = (item.quantity || 1) - 1;\n        const quantity = newQuantity >= 0 ? newQuantity : 0;\n        return _objectSpread({}, item, {\n          quantity\n        });\n      }\n\n      return item;\n    });\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\n    this.setState({\n      basketItems: updatedBasketItems\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          basketItems = _this$state.basketItems,\n          totalPrice = _this$state.totalPrice;\n    return React.createElement(\"div\", {\n      className: \"basket-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Basket\"), basketItems.length === 0 ? React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"There are currently no items in your basket.\") : React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"basket-table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, basketItems.map((item, index) => React.createElement(\"tr\", {\n      key: index,\n      className: \"basket-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: item.imageUrl,\n      alt: item.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"\\u20AC\", item.price), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u20AC\", (item.price * (item.quantity || 1)).toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.handleDecreaseQuantity(item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"-\"), item.quantity || 1, React.createElement(\"button\", {\n      onClick: () => this.handleIncreaseQuantity(item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.handleDelete(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"X\")))))), React.createElement(\"div\", {\n      className: \"total-price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Total Price: \\u20AC\", totalPrice.toFixed(2)), React.createElement(BuyCar, {\n      basketItems: basketItems,\n      totalPrice: totalPrice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default BasketPage;","map":{"version":3,"sources":["C:\\nodejs_projects\\stylekoi_repo\\client\\src\\components\\BuyBasket.js"],"names":["React","Component","BuyCar","BasketPage","constructor","props","state","basketItems","JSON","parse","localStorage","getItem","totalPrice","handleDelete","bind","handleIncreaseQuantity","handleDecreaseQuantity","calculateTotalPrice","componentDidMount","componentDidUpdate","prevProps","prevState","reduce","total","item","price","quantity","setState","index","itemId","id","updatedBasketItems","filter","setItem","stringify","map","newQuantity","render","length","imageUrl","name","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport BuyCar from \"./BuyCar\";\r\n\r\nclass BasketPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      basketItems: JSON.parse(localStorage.getItem(\"basketItems\")) || [],\r\n      totalPrice: 0,\r\n    };\r\n\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n    this.handleIncreaseQuantity = this.handleIncreaseQuantity.bind(this);\r\n    this.handleDecreaseQuantity = this.handleDecreaseQuantity.bind(this);\r\n    this.calculateTotalPrice = this.calculateTotalPrice.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.calculateTotalPrice();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.basketItems !== this.state.basketItems) {\r\n      this.calculateTotalPrice();\r\n    }\r\n  }\r\n\r\n  calculateTotalPrice() {\r\n    const { basketItems } = this.state;\r\n    const totalPrice = basketItems.reduce((total, item) => {\r\n      return total + item.price * (item.quantity || 1);\r\n    }, 0);\r\n    this.setState({ totalPrice });\r\n  }\r\n\r\n  handleDelete(index) {\r\n    const { basketItems } = this.state;\r\n    const itemId = basketItems[index].id;\r\n    const updatedBasketItems = basketItems.filter((item) => item.id !== itemId);\r\n\r\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\r\n    this.setState({ basketItems: updatedBasketItems });\r\n  }\r\n\r\n  handleIncreaseQuantity(id) {\r\n    const { basketItems } = this.state;\r\n\r\n    const updatedBasketItems = basketItems.map((item) => {\r\n      if (item.id === id) {\r\n        return { ...item, quantity: (item.quantity || 1) + 1 };\r\n      }\r\n      return item;\r\n    });\r\n\r\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\r\n    this.setState({ basketItems: updatedBasketItems });\r\n  }\r\n\r\n  handleDecreaseQuantity(id) {\r\n    const { basketItems } = this.state;\r\n\r\n    const updatedBasketItems = basketItems.map((item) => {\r\n      if (item.id === id) {\r\n        const newQuantity = (item.quantity || 1) - 1;\r\n        const quantity = newQuantity >= 0 ? newQuantity : 0;\r\n        return { ...item, quantity };\r\n      }\r\n      return item;\r\n    });\r\n\r\n    localStorage.setItem(\"basketItems\", JSON.stringify(updatedBasketItems));\r\n    this.setState({ basketItems: updatedBasketItems });\r\n  }\r\n\r\n  render() {\r\n    const { basketItems, totalPrice } = this.state;\r\n\r\n    return (\r\n      <div className=\"basket-page\">\r\n        <h1>Basket</h1>\r\n        {basketItems.length === 0 ? (\r\n          <h4>There are currently no items in your basket.</h4>\r\n        ) : (\r\n          <React.Fragment>\r\n            <table className=\"basket-table\">\r\n              <tbody>\r\n                {basketItems.map((item, index) => (\r\n                  <tr key={index} className=\"basket-item\">\r\n                    <td>\r\n                      <img src={item.imageUrl} alt={item.name} />\r\n                    </td>\r\n                    <td>€{item.price}</td>\r\n                    <td>€{(item.price * (item.quantity || 1)).toFixed(2)}</td>\r\n                    <td>\r\n                      <button\r\n                        onClick={() => this.handleDecreaseQuantity(item.id)}\r\n                      >\r\n                        -\r\n                      </button>\r\n                      {item.quantity || 1}\r\n                      <button\r\n                        onClick={() => this.handleIncreaseQuantity(item.id)}\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </td>\r\n                    <td>\r\n                      <button onClick={() => this.handleDelete(index)}>X</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <div className=\"total-price\">Total Price: €{totalPrice.toFixed(2)}</div>\r\n            <BuyCar basketItems={basketItems} totalPrice={totalPrice} />\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BasketPage;"]},"metadata":{},"sourceType":"module"}