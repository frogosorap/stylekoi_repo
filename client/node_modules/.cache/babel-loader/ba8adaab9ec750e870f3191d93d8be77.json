{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Henry\\\\OneDrive - Dundalk Institute of Technology\\\\Year 2\\\\Full Stack Development\\\\style_koi\\\\stylekoi_repo\\\\client\\\\src\\\\components\\\\EditCar.js\";\nimport React, { Component } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport LinkInClass from \"../components/LinkInClass\";\nimport { ACCESS_LEVEL_NORMAL_USER, SERVER_HOST } from \"../config/global_constants\";\nexport default class EditCar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const carObject = {\n        name: this.state.name,\n        colour: this.state.colour,\n        year: this.state.year,\n        price: this.state.price,\n        size: this.state.size,\n        gender: this.state.gender,\n        fabric: this.state.fabric,\n        description: this.state.description\n      };\n      axios.put(\"\".concat(SERVER_HOST, \"/cars/\").concat(this.props.match.params.id), carObject, {\n        headers: {\n          \"authorization\": localStorage.token\n        }\n      }).then(res => {\n        this.setState({\n          redirectToDisplayAllCars: true\n        });\n      }).catch(err => {\n        this.setState({\n          wasSubmittedAtLeastOnce: true\n        });\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      colour: \"\",\n      year: \"\",\n      price: \"\",\n      size: \"\",\n      gender: \"\",\n      fabric: \"\",\n      description: \"\",\n      redirectToDisplayAllCars: localStorage.accessLevel < ACCESS_LEVEL_NORMAL_USER,\n      wasSubmittedAtLeastOnce: false\n    };\n  }\n\n  componentDidMount() {\n    this.inputToFocus.focus();\n    axios.get(\"\".concat(SERVER_HOST, \"/cars/\").concat(this.props.match.params.id), {\n      headers: {\n        \"authorization\": localStorage.token\n      }\n    }).then(res => {\n      this.setState({\n        name: res.data.name,\n        colour: res.data.colour,\n        year: res.data.year,\n        price: res.data.price,\n        size: res.data.size,\n        gender: res.data.gender,\n        fabric: res.data.fabric,\n        description: res.data.description\n      });\n    }).catch(err => {// do nothing\n    });\n  }\n\n  render() {\n    let errorMessage = \"\";\n\n    if (this.state.wasSubmittedAtLeastOnce) {\n      errorMessage = React.createElement(\"div\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Error: All fields must be filled in\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"forms\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.state.redirectToDisplayAllCars ? React.createElement(Redirect, {\n      to: \"/DisplayAllCars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }) : null, errorMessage, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Name\"), React.createElement(Form.Control, {\n      ref: input => {\n        this.inputToFocus = input;\n      },\n      type: \"text\",\n      name: \"name\",\n      value: this.state.name,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"colour\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      as: \"select\",\n      name: \"colour\",\n      value: this.state.colour,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Select Color\"), React.createElement(\"option\", {\n      value: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Red\"), React.createElement(\"option\", {\n      value: \"blue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Blue\"), React.createElement(\"option\", {\n      value: \"green\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Green\"))), React.createElement(Form.Group, {\n      controlId: \"year\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Year\"), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"year\",\n      value: this.state.year,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Price\"), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"price\",\n      value: this.state.price,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"size\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Size\"), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"size\",\n      value: this.state.size,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Gender\"), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"gender\",\n      value: this.state.gender,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"fabric\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Fabric\"), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"fabric\",\n      value: this.state.fabric,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Description\"), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"description\",\n      value: this.state.description,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })), React.createElement(LinkInClass, {\n      value: \"Update\",\n      className: \"green-button\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(Link, {\n      className: \"red-button\",\n      to: \"/DisplayAllCars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Cancel\")));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Henry\\OneDrive - Dundalk Institute of Technology\\Year 2\\Full Stack Development\\style_koi\\stylekoi_repo\\client\\src\\components\\EditCar.js"],"names":["React","Component","Form","Redirect","Link","axios","LinkInClass","ACCESS_LEVEL_NORMAL_USER","SERVER_HOST","EditCar","constructor","props","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","carObject","state","colour","year","price","size","gender","fabric","description","put","match","params","id","headers","localStorage","token","then","res","redirectToDisplayAllCars","catch","err","wasSubmittedAtLeastOnce","accessLevel","componentDidMount","inputToFocus","focus","get","data","render","errorMessage","input"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\r\nimport Form from \"react-bootstrap/Form\"\r\nimport {Redirect, Link} from \"react-router-dom\"\r\nimport axios from \"axios\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\n\r\nimport {ACCESS_LEVEL_NORMAL_USER, SERVER_HOST} from \"../config/global_constants\"\r\n\r\nexport default class EditCar extends Component \r\n{\r\n    constructor(props) \r\n    {\r\n        super(props)\r\n\r\n        this.state = {\r\n            name: ``,\r\n            colour: ``,\r\n            year: ``,\r\n            price: ``,\r\n            size:``,\r\n            gender:``,\r\n            fabric:``,\r\n            description:``,\r\n            redirectToDisplayAllCars:localStorage.accessLevel < ACCESS_LEVEL_NORMAL_USER,\r\n            wasSubmittedAtLeastOnce:false\r\n        }\r\n    }\r\n\r\n    componentDidMount() \r\n    {      \r\n        this.inputToFocus.focus()\r\n  \r\n        axios.get(`${SERVER_HOST}/cars/${this.props.match.params.id}`, {headers:{\"authorization\":localStorage.token}})\r\n        .then(res => \r\n        {     \r\n            this.setState({\r\n                name: res.data.name,\r\n                colour: res.data.colour,\r\n                year: res.data.year,\r\n                price: res.data.price,\r\n                size: res.data.size,\r\n                gender: res.data.gender,\r\n                fabric: res.data.fabric,\r\n                description: res.data.description,\r\n            })            \r\n        })\r\n        .catch(err => \r\n        {\r\n            // do nothing\r\n        })\r\n    }\r\n\r\n\r\n    handleChange = (e) => \r\n    {\r\n        this.setState({[e.target.name]: e.target.value})\r\n    }\r\n\r\n\r\n    handleSubmit = (e) => \r\n    {\r\n        e.preventDefault()\r\n\r\n        const carObject = {\r\n            name: this.state.name,\r\n            colour: this.state.colour,\r\n            year: this.state.year,\r\n            price: this.state.price,\r\n            size: this.state.size,\r\n            gender: this.state.gender,\r\n            fabric: this.state.fabric,\r\n            description: this.state.description,\r\n        }\r\n\r\n        axios.put(`${SERVER_HOST}/cars/${this.props.match.params.id}`, carObject, {headers:{\"authorization\":localStorage.token}})\r\n        .then(res => \r\n        {             \r\n            this.setState({redirectToDisplayAllCars:true})\r\n        })\r\n        .catch(err => \r\n        {\r\n            this.setState({wasSubmittedAtLeastOnce: true})\r\n        })\r\n    }\r\n\r\n\r\n    render() \r\n    {\r\n        let errorMessage = \"\";\r\n        if(this.state.wasSubmittedAtLeastOnce)\r\n        {\r\n            errorMessage = <div className=\"error\">Error: All fields must be filled in<br/></div>;\r\n        } \r\n        \r\n        return (\r\n            <div className=\"forms\">\r\n    \r\n                {this.state.redirectToDisplayAllCars ? <Redirect to=\"/DisplayAllCars\"/> : null}  \r\n                    \r\n                {errorMessage}\r\n                \r\n                <Form>\r\n                    <Form.Group controlId=\"name\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control ref = {(input) => { this.inputToFocus = input }} type=\"text\" name=\"name\" value={this.state.name} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n<Form.Group controlId=\"colour\">\r\n                    <Form.Control\r\n              as=\"select\"\r\n              name=\"colour\"\r\n              value={this.state.colour}\r\n              onChange={this.handleChange}\r\n            >\r\n              <option value=\"\">Select Color</option>\r\n              <option value=\"red\">Red</option>\r\n              <option value=\"blue\">Blue</option>\r\n              <option value=\"green\">Green</option>\r\n              {/* Add more color options as needed */}\r\n            </Form.Control>\r\n          </Form.Group>\r\n\r\n                    <Form.Group controlId=\"year\">\r\n                        <Form.Label>Year</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"year\" value={this.state.year} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n        \r\n                    <Form.Group controlId=\"price\">\r\n                        <Form.Label>Price</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"price\" value={this.state.price} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"size\">\r\n                        <Form.Label>Size</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"size\" value={this.state.size} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"gender\">\r\n                        <Form.Label>Gender</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"gender\" value={this.state.gender} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"fabric\">\r\n                        <Form.Label>Fabric</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"fabric\" value={this.state.fabric} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"description\">\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"description\" value={this.state.description} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <LinkInClass value=\"Update\" className=\"green-button\" onClick={this.handleSubmit}/>  \r\n    \r\n                    <Link className=\"red-button\" to={\"/DisplayAllCars\"}>Cancel</Link>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}