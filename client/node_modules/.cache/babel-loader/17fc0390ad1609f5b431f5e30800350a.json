{"ast":null,"code":"var _jsxFileName = \"C:\\\\nodejs_projects\\\\stylekoi_repo\\\\client\\\\src\\\\components\\\\Profile.js\";\nimport React, { Component } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport LinkInClass from \"../components/LinkInClass\";\nimport { SERVER_HOST } from \"../config/global_constants\";\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleLogout = () => {\n      localStorage.clear();\n      this.setState({\n        isLoggedIn: false\n      });\n      window.location.reload();\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault(); // Update local storage\n\n      localStorage.setItem(\"orderName\", this.state.orderName);\n      localStorage.setItem(\"orderEmail\", this.state.orderEmail);\n      localStorage.setItem(\"address\", this.state.address);\n      localStorage.setItem(\"phone\", this.state.phone); // Send user details to server\n\n      axios.post(\"\".concat(SERVER_HOST, \"/user/details\"), {\n        orderName: this.state.orderName,\n        orderEmail: this.state.orderEmail,\n        address: this.state.address,\n        phone: this.state.phone\n      }).then(response => {\n        alert(\"Profile Updated Successfully\");\n      }).catch(error => {\n        console.error(\"Error updating profile:\", error);\n        alert(\"Failed to update profile. Please try again later.\");\n      });\n    };\n\n    this.state = {\n      isLoggedIn: true,\n      orderName: localStorage.getItem(\"orderName\") || \"\",\n      orderEmail: localStorage.getItem(\"orderEmail\") || \"\",\n      address: localStorage.getItem(\"address\") || \"\",\n      phone: localStorage.getItem(\"phone\") || \"\"\n    };\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem(\"token\")) {\n      this.setState({\n        isLoggedIn: false\n      });\n    }\n\n    const profilePhotoUrl = localStorage.getItem(\"profilePhoto\");\n    const name = localStorage.getItem(\"name\");\n    const orderName = localStorage.getItem(\"orderName\") || \"\";\n    const orderEmail = localStorage.getItem(\"orderEmail\") || \"\";\n    const address = localStorage.getItem(\"address\") || \"\";\n    const phone = localStorage.getItem(\"phone\") || \"\";\n    this.setState({\n      profilePhotoUrl,\n      name,\n      orderName,\n      orderEmail,\n      address,\n      phone\n    });\n  }\n\n  render() {\n    const profilePhotoUrl = localStorage.getItem(\"profilePhoto\");\n\n    if (!this.state.isLoggedIn) {\n      return React.createElement(Redirect, {\n        to: \"/DisplayAllCars\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"profileform\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Save\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:\\nodejs_projects\\stylekoi_repo\\client\\src\\components\\Profile.js"],"names":["React","Component","Redirect","Link","axios","LinkInClass","SERVER_HOST","Profile","constructor","props","handleLogout","localStorage","clear","setState","isLoggedIn","window","location","reload","handleChange","e","target","name","value","handleSubmit","preventDefault","setItem","state","orderName","orderEmail","address","phone","post","then","response","alert","catch","error","console","getItem","componentDidMount","profilePhotoUrl","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport LinkInClass from \"../components/LinkInClass\";\r\nimport { SERVER_HOST } from \"../config/global_constants\";\r\n\r\nexport default class Profile extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isLoggedIn: true,\r\n            orderName: localStorage.getItem(\"orderName\") || \"\",\r\n            orderEmail: localStorage.getItem(\"orderEmail\") || \"\",\r\n            address: localStorage.getItem(\"address\") || \"\",\r\n            phone: localStorage.getItem(\"phone\") || \"\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!localStorage.getItem(\"token\")) {\r\n            this.setState({ isLoggedIn: false });\r\n        }\r\n\r\n        const profilePhotoUrl = localStorage.getItem(\"profilePhoto\");\r\n        const name = localStorage.getItem(\"name\");\r\n        const orderName = localStorage.getItem(\"orderName\") || \"\";\r\n        const orderEmail = localStorage.getItem(\"orderEmail\") || \"\";\r\n        const address = localStorage.getItem(\"address\") || \"\";\r\n        const phone = localStorage.getItem(\"phone\") || \"\";\r\n\r\n        this.setState({ profilePhotoUrl, name, orderName, orderEmail, address, phone });\r\n    }\r\n\r\n    handleLogout = () => {\r\n        localStorage.clear();\r\n        this.setState({ isLoggedIn: false });\r\n        window.location.reload();\r\n    };\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    };\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // Update local storage\r\n        localStorage.setItem(\"orderName\", this.state.orderName);\r\n        localStorage.setItem(\"orderEmail\", this.state.orderEmail);\r\n        localStorage.setItem(\"address\", this.state.address);\r\n        localStorage.setItem(\"phone\", this.state.phone);\r\n        \r\n        // Send user details to server\r\n        axios.post(`${SERVER_HOST}/user/details`, {\r\n            orderName: this.state.orderName,\r\n            orderEmail: this.state.orderEmail,\r\n            address: this.state.address,\r\n            phone: this.state.phone\r\n        }).then(response => {\r\n            alert(\"Profile Updated Successfully\");\r\n        }).catch(error => {\r\n            console.error(\"Error updating profile:\", error);\r\n            alert(\"Failed to update profile. Please try again later.\");\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const profilePhotoUrl = localStorage.getItem(\"profilePhoto\");\r\n\r\n        if (!this.state.isLoggedIn) {\r\n            return <Redirect to=\"/DisplayAllCars\" />;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <br />\r\n                <center>\r\n                    {/* Your existing UI */}\r\n                    <form className=\"profileform\" onSubmit={this.handleSubmit}>\r\n                        {/* Your input fields */}\r\n                        <button type=\"submit\">Save</button>\r\n                    </form>\r\n                    {/* Your existing UI */}\r\n                </center>\r\n                <br /><br />\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}